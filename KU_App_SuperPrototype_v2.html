
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>KU Housing ‚Ä¢ Super Prototype v2</title>
<style>
:root{
  --ku-blue:#003F88; --ku-accent:#0089CC; --ku-soft:#E7F0FA; --bg:#F6F8FB;
  --card:#FFFFFF; --ink:#1F2329; --muted:#6B7280; --border:#E6EBF2;
  --success:#059669; --warn:#EAB308; --danger:#DC3545;
  --shadow:0 8px 20px rgba(16,24,40,0.06), 0 2px 6px rgba(16,24,40,0.06);
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;background:#fff;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Arial,sans-serif;color:var(--ink)}
.wrap{display:flex;align-items:center;justify-content:center;padding:24px}
.phone{width:420px;height:880px;border-radius:46px;background:var(--bg);box-shadow:0 20px 50px rgba(0,0,0,.12);position:relative;overflow:hidden;border:8px solid #111}
.screen{position:absolute; inset:0; padding:18px 16px 0; display:none}
.screen.active{display:block}
.status{display:flex;align-items:center;justify-content:space-between;padding:4px 12px 0 12px}
.notch{position:absolute; left:50%; transform:translateX(-50%); top:8px; width:150px;height:30px;border-radius:16px;background:#000}
.time{font-weight:700; font-size:18px; color:#111; padding-left:6px}
.signals{width:90px;height:16px; background:
  linear-gradient(#111,#111) left bottom/12px 10px no-repeat,
  linear-gradient(#111,#111) 20px 6px/12px 10px no-repeat,
  linear-gradient(#111,#111) 40px 2px/12px 10px no-repeat,
  linear-gradient(#111,#111) 60px 0/12px 10px no-repeat;
  opacity:.9
}
.header{display:flex;align-items:center;gap:12px;padding:8px 12px}
.logo{width:56px;height:56px;border-radius:14px;background:var(--ku-soft);border:2px solid var(--ku-blue);display:grid;place-items:center}
.logo svg{width:28px;height:28px}
.header-title{display:flex;flex-direction:column}
.header-title h1{font-size:20px;margin:0;color:var(--ink)}
.header-title span{font-size:12px;color:var(--muted)}
.avatar{margin-left:auto;width:56px;height:56px;border-radius:50%;border:2px solid var(--ku-blue);background:var(--ku-soft);display:grid;place-items:center;font-size:20px}
.card{background:var(--card); border:1px solid var(--border); border-radius:18px; box-shadow:var(--shadow);}
.card.pad{padding:14px 16px}
.section{padding:6px 14px 6px; color:var(--muted); font-weight:700; font-size:13px}
.roomcard{display:flex; align-items:center; gap:12px}
.roomcard .icon{width:46px;height:46px;border-radius:12px;background:var(--ku-soft); border:2px solid var(--ku-blue); display:grid;place-items:center}
.badge{margin-left:auto;background:var(--ku-soft);color:var(--ku-blue);border:2px solid var(--ku-blue); padding:6px 10px;border-radius:20px;font-weight:700;cursor:pointer}
.grid{display:grid; gap:14px}
.grid.quick{grid-template-columns:repeat(4,1fr)}
.grid.three{grid-template-columns:repeat(3,1fr)}
.tile{background:var(--card); border:1px solid var(--border); border-radius:16px; padding:10px 8px 8px; text-align:center; box-shadow:var(--shadow); cursor:pointer}
.tile .glyph{width:44px;height:44px;border-radius:50%;background:var(--ku-soft);border:2px solid var(--ku-blue);display:grid;place-items:center;margin:0 auto 8px}
.tile span{display:block;font-size:12px;font-weight:700;color:#18202A}
.nav{position:absolute;left:14px;right:14px;bottom:14px;height:74px;background:var(--card);border:1px solid var(--border);border-radius:28px;display:grid;grid-template-columns:repeat(4,1fr);align-items:center;padding:0 6px;box-shadow:var(--shadow)}
.nav .item{display:grid;place-items:center;font-size:11px;color:var(--muted);cursor:pointer}
.nav .item.active{color:var(--ku-blue);font-weight:700}
.list .row{display:flex;align-items:center;gap:12px;padding:14px;border-bottom:1px solid var(--border)}
.row:last-child{border-bottom:none}
.row .pill{margin-left:auto;font-size:12px;color:#fff;padding:6px 10px;border-radius:20px;font-weight:700}
.pill.success{background:var(--success)}.pill.warn{background:var(--warn)}.pill.danger{background:var(--danger)}.pill.info{background:var(--ku-blue)}
.machine-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
.machine{padding:12px;border:1px solid var(--border);border-radius:16px;background:#fff;box-shadow:var(--shadow)}
.machine .top{display:flex;align-items:center;gap:10px;margin-bottom:6px}
.machine .name{font-weight:700}
.machine .sub{font-size:12px;color:var(--muted)}
.machine .status{margin-left:auto;font-size:11px;color:#fff;padding:6px 10px;border-radius:18px;font-weight:700}
.status.success{background:var(--success)}.status.warn{background:var(--warn)}.status.danger{background:var(--danger)}
.btn{border:none;border-radius:18px;padding:10px 14px;font-weight:700;cursor:pointer}
.btn.primary{background:var(--ku-blue);color:#fff}
.btn.ghost{background:var(--ku-soft);color:var(--ku-blue);border:2px solid var(--ku-blue)}
.btn.link{background:transparent;color:var(--ku-blue);padding:0}
.btn.bar{width:100%}
.toolbar{display:flex;align-items:center;gap:8px;padding:8px 4px}
.back{border:none;background:transparent;color:var(--ku-blue);font-weight:700;display:flex;align-items:center;gap:6px;cursor:pointer}
.toolbar h2{margin:0;font-size:18px}
.toast{position:absolute;left:50%;transform:translateX(-50%);bottom:100px;background:var(--ink);color:#fff;padding:10px 14px;border-radius:12px;display:none}
.toast.show{display:block}
.map{height:160px;border-radius:14px;background:
  radial-gradient(circle at 70% 20%, #CDE4F8 0 64px, transparent 66px) no-repeat,
  linear-gradient(90deg,#dfe8f4 1px, transparent 1px) 0 0/30px 30px,
  linear-gradient(0deg,#dfe8f4 1px, transparent 1px) 0 0/30px 30px,
  #f5f8fe;border:1px solid var(--border);position:relative}
.pin{position:absolute;width:14px;height:14px;border-radius:50%;background:var(--ku-blue);left:60%;top:40%;box-shadow:0 0 0 8px rgba(0,63,136,.2)}
.modal{position:absolute;inset:0;background:rgba(0,0,0,.35);display:none;align-items:flex-end;justify-content:center}
.modal .sheet{background:#fff;width:100%;border-top-left-radius:22px;border-top-right-radius:22px;padding:16px 16px 24px;box-shadow:var(--shadow)}
.modal.show{display:flex}
.sheet .row{padding:8px 0}
.switch{display:flex;align-items:center;gap:6px}
.switch input{width:0;height:0;visibility:hidden}
.switch label{width:44px;height:26px;background:#e5e7eb;display:inline-block;border-radius:14px;position:relative;cursor:pointer}
.switch label:after{content:'';position:absolute;top:3px;left:3px;width:20px;height:20px;background:#fff;border-radius:50%;box-shadow:0 1px 3px rgba(0,0,0,.25);transition:all .2s}
.switch input:checked + label{background:var(--ku-blue)}
.switch input:checked + label:after{left:21px}
.helper{font-size:12px;color:var(--muted)}
.day{padding:8px 12px;border:1px solid var(--border);border-radius:14px;margin-right:8px;font-weight:700;color:var(--ink);background:#fff;cursor:pointer;display:inline-block}
.day.active{border-color:var(--ku-blue);color:#fff;background:var(--ku-blue)}
.slot{padding:8px 12px;border:1px solid var(--border);border-radius:14px;margin:6px 6px 0 0;display:inline-block;cursor:pointer}
.slot.active{border-color:var(--ku-blue);color:#fff;background:var(--ku-blue)}
.tabbar{display:flex;gap:8px;margin-bottom:8px}
.tab{padding:8px 12px;border:1px solid var(--border);border-radius:14px;cursor:pointer}
.tab.active{background:var(--ku-blue);color:#fff;border-color:var(--ku-blue)}
.input, select, textarea{width:100%;padding:10px;border-radius:12px;border:1px solid var(--border);outline:none}
.kpi{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
.kpi .chip{padding:6px 10px;border:1px solid var(--border);border-radius:12px;background:#fff;font-size:12px}
.qr{width:140px;height:140px;border:10px solid #111;background:repeating-linear-gradient(45deg,#111 0 4px,#fff 4px 8px)}
</style>
</head>
<body>
<div class="wrap">
  <div class="phone">
    <div class="notch" aria-hidden="true"></div>

    <!-- HOME -->
    <section class="screen active" id="home">
      <div class="status"><div class="time">9:41</div><div class="signals"></div></div>
      <header class="header">
        <div class="logo"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color:var(--ku-blue)"><path d="M2 8 L8 2 M16 22 L22 16 M2 16 L8 22 M16 2 L22 8"/></svg></div>
        <div class="header-title"><h1>Khalifa University</h1><span>Housing</span></div>
        <div class="avatar">üë§</div>
      </header>
      <div class="card pad" style="margin:6px 12px 10px">
        <div class="roomcard">
          <div class="icon"><svg viewBox="0 0 24 24" stroke="currentColor" fill="none" stroke-width="2" style="color:var(--ku-blue)"><rect x="2" y="6" width="20" height="12" rx="2"/><line x1="2" y1="10" x2="22" y2="10"/><rect x="6" y="13" width="8" height="3" fill="currentColor"/></svg></div>
          <div><div style="font-weight:700">Access Room Card</div><div style="font-size:12px;color:var(--muted)">ACR ‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢</div></div>
          <button class="badge" onclick="nav('acr')">Open</button>
        </div>
      </div>

      <div class="section">Quick Actions</div>
      <div class="grid quick" style="padding:0 12px">
        <div class="tile" onclick="nav('laundry_rooms')"><div class="glyph"><svg viewBox='0 0 24 24' stroke='currentColor' fill='none' stroke-width='2' style='width:22px;height:22px;color:var(--ku-blue)'><rect x='3' y='3' width='18' height='18' rx='3'/><circle cx='12' cy='12' r='5'/><circle cx='8' cy='7' r='1.2' fill='currentColor'/><circle cx='12' cy='7' r='1.2' fill='currentColor'/></svg></div><span>Laundry</span></div>
        <div class="tile" onclick="nav('maint_list')"><div class="glyph">üõ†Ô∏è</div><span>Maintenance</span></div>
        <div class="tile" onclick="nav('payments')"><div class="glyph">üí≥</div><span>Payments</span></div>
        <div class="tile" onclick="nav('packages')"><div class="glyph">üì¶</div><span>Packages</span></div>
        <div class="tile" onclick="nav('visitor')"><div class="glyph">üë•</div><span>Visitor</span></div>
        <div class="tile" onclick="nav('support')"><div class="glyph">üÜò</div><span>Support</span></div>
        <div class="tile" onclick="nav('comms_feed')"><div class="glyph">üì∞</div><span>Comms</span></div>
        <div class="tile" onclick="nav('rewards')"><div class="glyph">üèÜ</div><span>Rewards</span></div>
      </div>

      <div class="section">Support &amp; Wellbeing</div>
      <div class="grid three" style="padding:0 12px">
        <div class="tile" onclick="nav('ra')"><div class="glyph">üìû</div><span>RA Contact</span></div>
        <div class="tile" onclick="nav('emergency')"><div class="glyph">üö®</div><span>Emergency</span></div>
        <div class="tile" onclick="nav('counsellor')"><div class="glyph">üóìÔ∏è</div><span>Counsellor</span></div>
      </div>

      <div class="section">Community</div>
      <div class="grid three" style="padding:0 12px 86px">
        <div class="tile" onclick="nav('chat')"><div class="glyph">üí¨</div><span>Dorm Chat</span></div>
        <div class="tile" onclick="nav('lostfound')"><div class="glyph">üîé</div><span>Lost &amp; Found</span></div>
        <div class="tile" onclick="nav('peermatch')"><div class="glyph">ü§ù</div><span>Peer Match</span></div>
      </div>
      <nav class="nav">
        <div class="item active">Home</div><div class="item" onclick="nav('comms_feed')">Messages</div><div class="item" onclick="nav('rewards')">Rewards</div><div class="item" onclick="nav('profile')">Profile</div>
      </nav>
    </section>

    <!-- Access Room Card -->
    <section class="screen" id="acr">
      <div class="status"><button class="back" onclick="nav('home')">‚Üê Home</button><div style="width:90px"></div></div>
      <div class="card pad" style="margin:8px 12px;display:grid;place-items:center">
        <div style="font-weight:800">Access Room Card</div>
        <div class="qr" style="margin:10px 0"></div>
        <div class="helper">Tap at your door reader to unlock</div>
      </div>
      <div class="card pad" style="margin:8px 12px">
        <div style="font-weight:700">Recent uses</div>
        <div class="helper">08:41 Bldg C ‚Ä¢ Rm 321 ‚Ä¢ Door opened<br>08:30 Bldg C ‚Ä¢ Lobby Gate</div>
      </div>
    </section>

    <!-- Laundry: Rooms -->
    <section class="screen" id="laundry_rooms">
      <div class="status"><button class="back" onclick="nav('home')">‚Üê Home</button><div style="width:90px"></div></div>
      <header class="header">
        <div class="logo"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="color:var(--ku-blue)"><path d="M2 8 L8 2 M16 22 L22 16 M2 16 L8 22 M16 2 L22 8"/></svg></div>
        <div class="header-title"><h1>Laundry</h1><span>Choose a room</span></div>
      </header>
      <div class="card list" style="margin:10px 12px" id="laundryRoomList"></div>
      <nav class="nav"><div class="item" onclick="nav('home')">Home</div><div class="item active">Laundry</div><div class="item" onclick="nav('laundry_bookings')">Bookings</div><div class="item" onclick="nav('profile')">Profile</div></nav>
    </section>

    <!-- Laundry Room detail -->
    <section class="screen" id="laundry_room_detail">
      <div class="status"><button class="back" onclick="nav('laundry_rooms')">‚Üê Rooms</button><div style="width:90px"></div></div>
      <div class="toolbar"><h2 id="laundryRoomTitle">Dorm A ‚Äî Level 1</h2>
        <button class="btn ghost" style="margin-left:auto" onclick="laundryFilter('all')">All</button>
        <button class="btn ghost" onclick="laundryFilter('washer')">Washers</button>
        <button class="btn ghost" onclick="laundryFilter('dryer')">Dryers</button>
      </div>
      <div class="card pad" style="margin:8px 12px">
        <div class="map"><div class="pin"></div></div>
        <div class="helper" style="margin-top:8px">Open 06:00‚Äì23:00 ‚Ä¢ <button class="btn link" onclick="openModal('dir')">Get directions</button> ‚Ä¢ <button class="btn link" onclick="nav('laundry_booking')">Book a slot</button></div>
      </div>
      <div class="section">Live Machines</div>
      <div class="machine-grid" style="padding:0 12px 86px" id="laundryMachines"></div>
      <nav class="nav"><div class="item" onclick="nav('home')">Home</div><div class="item active" onclick="nav('laundry_rooms')">Laundry</div><div class="item" onclick="nav('laundry_booking')">Book</div><div class="item" onclick="nav('profile')">Profile</div></nav>
    </section>

    <!-- Laundry Booking (day/hour + machine) -->
    <section class="screen" id="laundry_booking">
      <div class="status"><button class="back" onclick="nav('laundry_room_detail')">‚Üê Room</button><div style="width:90px"></div></div>
      <header class="header"><div class="header-title"><h1>Laundry Booking</h1><span>Select machine and time</span></div></header>
      <div class="card pad" style="margin:8px 12px">
        <label>Machine<br>
          <select id="lb_machine" class="input"></select>
        </label>
        <div style="margin-top:10px">
          <div id="lb_days"></div>
          <div id="lb_slots" style="margin-top:6px"></div>
        </div>
        <div style="margin-top:10px;display:flex;gap:8px">
          <button class="btn primary" onclick="confirmLaundryBooking()">Reserve Slot</button>
          <button class="btn ghost" onclick="nav('laundry_room_detail')">Cancel</button>
        </div>
      </div>
      <div class="card pad" style="margin:8px 12px">
        <div style="font-weight:700">Policy</div>
        <div class="helper">Max 1 active reservation per student; 10‚Äëminute grace period before release.</div>
      </div>
      <nav class="nav"><div class="item" onclick="nav('laundry_rooms')">Rooms</div><div class="item active">Booking</div><div class="item" onclick="nav('laundry_bookings')">My Slots</div><div class="item" onclick="nav('profile')">Profile</div></nav>
    </section>

    <!-- My Laundry Bookings -->
    <section class="screen" id="laundry_bookings">
      <div class="status"><button class="back" onclick="nav('laundry_rooms')">‚Üê Laundry</button><div style="width:90px"></div></div>
      <div class="card list" style="margin:8px 12px" id="lb_list"></div>
      <nav class="nav"><div class="item" onclick="nav('laundry_rooms')">Rooms</div><div class="item" onclick="nav('laundry_booking')">Book</div><div class="item active">My Slots</div><div class="item" onclick="nav('profile')">Profile</div></nav>
    </section>

    <div class="modal" id="dir"><div class="sheet"><div style="font-weight:800">Directions</div><div class="map" style="margin-top:6px"><div class="pin"></div></div><button class="btn primary btn bar" onclick="closeModal('dir')">Close</button></div></div>

    <!-- Maintenance -->
    <section class="screen" id="maint_list">
      <div class="status"><button class="back" onclick="nav('home')">‚Üê Home</button><div style="width:90px"></div></div>
      <header class="header"><div class="logo"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="color:var(--ku-blue)"><path d="M2 8 L8 2 M16 22 L22 16 M2 16 L8 22 M16 2 L22 8"/></svg></div><div class="header-title"><h1>Maintenance</h1><span>Requests &amp; Tracking</span></div><button class="badge" onclick="nav('maint_new')">New</button></header>
      <div class="card list" style="margin:10px 12px" id="maintList"></div>
      <nav class="nav"><div class="item" onclick="nav('home')">Home</div><div class="item active">Maintenance</div><div class="item" onclick="nav('rewards')">Rewards</div><div class="item" onclick="nav('profile')">Profile</div></nav>
    </section>
    <section class="screen" id="maint_new">
      <div class="status"><button class="back" onclick="nav('maint_list')">‚Üê Requests</button><div style="width:90px"></div></div>
      <div class="card pad" style="margin:8px 12px">
        <label>Category<br><select id="cat" class="input"><option>Air Conditioning</option><option>Plumbing</option><option>Electrical</option><option>Carpentry</option></select></label><br><br>
        <label>Location<br><input id="loc" class="input" placeholder="Building C ‚Ä¢ Room 321"></label><br><br>
        <label>Details<br><textarea id="desc" class="input" rows="4" placeholder="Explain the problem..."></textarea></label><br><br>
        <div class="helper">Add photo (optional): [placeholder]</div><br>
        <button class="btn primary btn bar" onclick="submitMaint()">Submit</button>
      </div>
    </section>
    <section class="screen" id="maint_ticket">
      <div class="status"><button class="back" onclick="nav('maint_list')">‚Üê Requests</button><div style="width:90px"></div></div>
      <div class="card pad" style="margin:8px 12px">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div><div style="font-weight:800" id="ticketTitle">A/C not cooling</div><div class="helper" id="ticketMeta">Bldg C ‚Ä¢ Room 321 ‚Ä¢ #M-1042</div></div>
          <div id="ticketPill" class="pill warn">In Progress</div>
        </div>
      </div>
      <div class="card pad" style="margin:8px 12px">
        <div style="font-weight:700;margin-bottom:8px">Status timeline</div>
        <div class="helper" id="timeline">08:12 submitted ‚Ä¢ 09:01 assigned ‚Ä¢ 12:22 technician en route</div>
        <div class="kpi"><div class="chip">Avg repair 18h</div><div class="chip">SLA 24h</div></div>
        <div style="margin-top:10px;display:flex;gap:8px"><button class="btn ghost" onclick="advanceTicket()">Add update</button><button class="btn primary" onclick="resolveTicket()">Mark resolved</button></div>
      </div>
      <div class="card pad" id="ratingCard" style="margin:8px 12px;display:none"><div style="font-weight:700;margin-bottom:6px">Rate the service</div><div id="stars" style="font-size:22px;letter-spacing:2px;cursor:pointer">‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è</div><div class="helper">Thanks for your feedback!</div></div>
    </section>

    <!-- Booking facilities -->
    <section class="screen" id="book_spaces">
      <div class="status"><button class="back" onclick="nav('home')">‚Üê Home</button><div style="width:90px"></div></div>
      <header class="header"><div class="logo"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="color:var(--ku-blue)"><path d="M2 8 L8 2 M16 22 L22 16 M2 16 L8 22 M16 2 L22 8"/></svg></div><div class="header-title"><h1>Facility Booking</h1><span>Gyms ‚Ä¢ Courts ‚Ä¢ Rooms</span></div></header>
      <div class="card pad" style="margin:8px 12px"><div class="day active" onclick="selectDay(this)">Mon 22</div><div class="day" onclick="selectDay(this)">Tue 23</div><div class="day" onclick="selectDay(this)">Wed 24</div></div>
      <div class="card list" style="margin:8px 12px" id="spaceList"></div>
      <nav class="nav"><div class="item" onclick="nav('home')">Home</div><div class="item active">Booking</div><div class="item" onclick="nav('rewards')">Rewards</div><div class="item" onclick="nav('profile')">Profile</div></nav>
    </section>
    <section class="screen" id="book_space_detail">
      <div class="status"><button class="back" onclick="nav('book_spaces')">‚Üê Spaces</button><div style="width:90px"></div></div>
      <div class="card pad" style="margin:8px 12px">
        <div style="font-weight:800" id="spaceTitle">Gym ‚Äî Court A</div>
        <div class="helper" id="spaceMeta">Capacity 10 ‚Ä¢ Ground floor</div>
        <div style="margin-top:8px"><div class="slot" onclick="selectSlot(this)">18:00‚Äì19:00</div><div class="slot" onclick="selectSlot(this)">19:00‚Äì20:00</div><div class="slot" onclick="selectSlot(this)">20:00‚Äì21:00</div></div>
        <div style="margin-top:10px;display:flex;gap:8px"><button class="btn primary" onclick="confirmBooking()">Reserve</button><button class="btn ghost" onclick="nav('book_spaces')">Cancel</button></div>
      </div>
      <div class="card pad" style="margin:8px 12px"><div style="font-weight:700">Check‚Äëin policy</div><div class="helper">Check‚Äëin via QR within 10 minutes to avoid a no‚Äëshow.</div></div>
    </section>
    <section class="screen" id="book_confirm">
      <div class="status"><button class="back" onclick="nav('book_space_detail')">‚Üê Back</button><div style="width:90px"></div></div>
      <div class="card pad" style="margin:8px 12px"><div style="font-weight:800">Reservation confirmed</div><div class="helper" id="confirmMeta">Gym ‚Äî Court A, 18:00‚Äì19:00</div><div class="map" style="margin-top:8px;display:grid;place-items:center"><div class="helper">QR check‚Äëin</div><div class="qr"></div></div></div>
    </section>

    <!-- Comms -->
    <section class="screen" id="comms_feed">
      <div class="status"><button class="back" onclick="nav('home')">‚Üê Home</button><div style="width:90px"></div></div>
      <header class="header"><div class="logo"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="color:var(--ku-blue)"><path d="M2 8 L8 2 M16 22 L22 16 M2 16 L8 22 M16 2 L22 8"/></svg></div><div class="header-title"><h1>Communication Hub</h1><span>Announcements &amp; Events</span></div></header>
      <div class="card list" style="margin:10px 12px" id="feed"></div>
      <div class="card pad" style="margin:10px 12px"><div style="display:flex;gap:8px;align-items:center"><div style="font-weight:700">Email digest: Daily</div><button class="btn ghost" style="margin-left:auto" onclick="nav('comms_prefs')">Manage</button></div></div>
      <nav class="nav"><div class="item" onclick="nav('home')">Home</div><div class="item active">Comms</div><div class="item" onclick="nav('rewards')">Rewards</div><div class="item" onclick="nav('profile')">Profile</div></nav>
    </section>
    <section class="screen" id="comms_prefs">
      <div class="status"><button class="back" onclick="nav('comms_feed')">‚Üê Feed</button><div style="width:90px"></div></div>
      <div class="card pad" style="margin:10px 12px"><div class="row"><div class="switch"><input type="checkbox" id="prefEmail" checked><label for="prefEmail"></label></div><div><div style="font-weight:700">Email</div><div class="helper">Primary channel</div></div></div><div class="row"><div class="switch"><input type="checkbox" id="prefPush"><label for="prefPush"></label></div><div><div style="font-weight:700">Push</div><div class="helper">Optional; quiet hours 22:00‚Äì07:00</div></div></div><button class="btn primary btn bar" onclick="nav('comms_feed')">Save</button></div>
    </section>

    <!-- Payments & Billing -->
    <section class="screen" id="payments">
      <div class="status"><button class="back" onclick="nav('home')">‚Üê Home</button><div style="width:90px"></div></div>
      <header class="header"><div class="header-title"><h1>Payments &amp; Billing</h1><span>Balance and invoices</span></div></header>
      <div class="card pad" style="margin:8px 12px"><div style="display:flex;justify-content:space-between"><div><div class="helper">Outstanding balance</div><div style="font-size:28px;font-weight:800">AED <span id="balance">2140</span></div></div><button class="btn primary" onclick="payNow()">Pay now</button></div></div>
      <div class="card list" style="margin:8px 12px" id="invoices"></div>
    </section>

    <!-- Packages -->
    <section class="screen" id="packages">
      <div class="status"><button class="back" onclick="nav('home')">‚Üê Home</button><div style="width:90px"></div></div>
      <header class="header"><div class="header-title"><h1>Packages</h1><span>Pickup &amp; alerts</span></div></header>
      <div class="card list" style="margin:8px 12px" id="pkgList"></div>
    </section>

    <!-- Visitor Request -->
    <section class="screen" id="visitor">
      <div class="status"><button class="back" onclick="nav('home')">‚Üê Home</button><div style="width:90px"></div></div>
      <header class="header"><div class="header-title"><h1>Visitor Request</h1><span>Create a pass</span></div></header>
      <div class="card pad" style="margin:8px 12px"><label>Name<br><input id="v_name" class="input" placeholder="Visitor full name"></label><br><label>Date<br><input id="v_date" type="date" class="input"></label><br><label>Arrive<br><input id="v_from" type="time" class="input"></label><br><label>Leave<br><input id="v_to" type="time" class="input"></label><br><button class="btn primary btn bar" onclick="createVisitor()">Generate pass</button></div>
      <div class="card list" style="margin:8px 12px" id="v_passes"></div>
    </section>

    <!-- Support Centre -->
    <section class="screen" id="support">
      <div class="status"><button class="back" onclick="nav('home')">‚Üê Home</button><div style="width:90px"></div></div>
      <header class="header"><div class="header-title"><h1>Support &amp; Wellbeing</h1><span>24/7 assistance</span></div></header>
      <div class="card pad" style="margin:8px 12px">
        <div class="tabbar"><div class="tab active" onclick="openSupportTab(event,'help')">Help</div><div class="tab" onclick="openSupportTab(event,'faqs')">FAQs</div><div class="tab" onclick="openSupportTab(event,'contact')">Contact</div></div>
        <div id="help"><div class="helper">Raise a ticket, find contacts, or book a counsellor.</div><div style="margin-top:8px;display:flex;gap:8px"><button class="btn primary" onclick="nav('maint_new')">New maintenance</button><button class="btn ghost" onclick="nav('counsellor')">Counsellor booking</button></div></div>
        <div id="faqs" style="display:none"><div class="helper">‚Ä¢ Quiet hours: 22:00‚Äì07:00 ‚Ä¢ Guests: 10:00‚Äì22:00 ‚Ä¢ Emergencies: 999/997</div></div>
        <div id="contact" style="display:none"><div class="helper">Housing Desk: +971 ‚Ä¢ housing@ku.ac.ae</div></div>
      </div>
    </section>

    <!-- RA Contact -->
    <section class="screen" id="ra">
      <div class="status"><button class="back" onclick="nav('home')">‚Üê Home</button><div style="width:90px"></div></div>
      <div class="card pad" style="margin:8px 12px"><div style="display:flex;align-items:center;gap:12px"><div class="glyph">üë§</div><div><div style="font-weight:800">Your RA: Sara Al‚ÄëMansoori</div><div class="helper">Dorm C ‚Ä¢ Floor 3</div></div></div><div style="margin-top:8px;display:flex;gap:8px"><button class="btn primary" onclick="nav('chat')">Message</button><button class="btn ghost" onclick="toast('Meeting scheduled')">Schedule meeting</button></div></div>
    </section>

    <!-- Counsellor Booking -->
    <section class="screen" id="counsellor">
      <div class="status"><button class="back" onclick="nav('home')">‚Üê Home</button><div style="width:90px"></div></div>
      <div class="card pad" style="margin:8px 12px"><label>Counsellor<br><select id="c_sel" class="input"><option>Dr. Ahmed (Wellbeing)</option><option>Ms. Fatima (Academic)</option></select></label><br><div><div class="day active" onclick="selectDay(this)">Thu 25</div><div class="day" onclick="selectDay(this)">Fri 26</div></div><div style="margin-top:8px"><div class="slot active">10:00</div><div class="slot">11:00</div><div class="slot">14:00</div></div><div style="margin-top:10px"><button class="btn primary btn bar" onclick="toast('Counsellor booked')">Book</button></div></div>
    </section>

    <!-- Dorm Chat -->
    <section class="screen" id="chat">
      <div class="status"><button class="back" onclick="nav('home')">‚Üê Home</button><div style="width:90px"></div></div>
      <div class="card pad" style="margin:8px 12px;height:620px;display:flex;flex-direction:column"><div id="chatBox" style="flex:1;overflow:auto"><div class="helper">[09:44] RA Sara: Welcome to the floor! Orientation at 18:00.</div></div><div style="display:flex;gap:6px"><input id="chatMsg" class="input" placeholder="Message dorm..."><button class="btn primary" onclick="sendChat()">Send</button></div></div>
    </section>

    <!-- Lost & Found -->
    <section class="screen" id="lostfound">
      <div class="status"><button class="back" onclick="nav('home')">‚Üê Home</button><div style="width:90px"></div></div>
      <div class="card pad" style="margin:8px 12px">
        <div class="tabbar"><div class="tab active" onclick="lfTab(event,'found')">Found Items</div><div class="tab" onclick="lfTab(event,'report')">Report Lost</div><div class="tab" onclick="lfTab(event,'mine')">My Reports</div></div>
        <div id="found" class="list"><div class="row"><div class="glyph">üéß</div><div><div style="font-weight:800">Headphones</div><div class="helper">Found: Dorm A lobby</div></div><button class="pill info" onclick="toast('Claim submitted')">Claim</button></div><div class="row"><div class="glyph">üîë</div><div><div style="font-weight:800">Keys</div><div class="helper">Found: Gym court</div></div><button class="pill info" onclick="toast('Claim submitted')">Claim</button></div></div>
        <div id="report" style="display:none"><label>Item<br><input id="lf_item" class="input" placeholder="e.g., Black wallet"></label><br><label>Where<br><input id="lf_where" class="input" placeholder="Dorm B cafeteria"></label><br><button class="btn primary btn bar" onclick="reportLost()">Report</button></div>
        <div id="mine" style="display:none" class="list"><div id="lf_my"></div></div>
      </div>
    </section>

    <!-- Peer Match -->
    <section class="screen" id="peermatch">
      <div class="status"><button class="back" onclick="nav('home')">‚Üê Home</button><div style="width:90px"></div></div>
      <div class="card pad" style="margin:8px 12px"><div style="font-weight:800">Peer Match</div><div class="helper">Pick interests; we‚Äôll suggest study buddies.</div><div style="margin-top:8px"><label><input type="checkbox" id="i_ai"> AI</label> ‚Ä¢ <label><input type="checkbox" id="i_football"> Football</label> ‚Ä¢ <label><input type="checkbox" id="i_gaming"> Gaming</label> ‚Ä¢ <label><input type="checkbox" id="i_photography"> Photography</label></div><div style="margin-top:10px"><button class="btn primary" onclick="genMatches()">Find matches</button></div><div id="matchRes" class="list" style="margin-top:8px"></div></div>
    </section>

    <!-- Rewards -->
    <section class="screen" id="rewards">
      <div class="status"><button class="back" onclick="nav('home')">‚Üê Home</button><div style="width:90px"></div></div>
      <div class="card pad" style="margin:8px 12px"><div style="display:flex;justify-content:space-between"><div><div class="helper">Points</div><div style="font-size:28px;font-weight:800" id="pts">2320</div></div><button class="btn ghost" onclick="redeem()">Redeem</button></div></div>
      <div class="card list" style="margin:8px 12px"><div class="row"><div class="glyph">üßπ</div><div><div style="font-weight:800">Volunteer cleanup</div><div class="helper">+200 pts</div></div></div><div class="row"><div class="glyph">üí≥</div><div><div style="font-weight:800">On‚Äëtime payment</div><div class="helper">+100 pts</div></div></div></div>
    </section>

    <!-- Emergency -->
    <section class="screen" id="emergency">
      <div class="status"><button class="back" onclick="nav('home')">‚Üê Home</button><div style="width:90px"></div></div>
      <div class="card pad" style="margin:8px 12px"><div style="font-weight:800">Emergency contacts</div><div class="helper">Police 999 ‚Ä¢ Ambulance 998 ‚Ä¢ Fire 997</div><div style="margin-top:8px"><button class="btn primary btn bar" onclick="toast('Dialling 999')">Call 999</button></div></div>
    </section>

    <!-- Move‚ÄëIn / Move‚ÄëOut (link to existing flows) -->
    <section class="screen" id="movein">
      <div class="status"><button class="back" onclick="nav('home')">‚Üê Home</button><div style="width:90px"></div></div>
      <header class="header"><div class="header-title"><h1>Move‚ÄëIn</h1><span>Welcome journey</span></div></header>
      <div class="card pad" style="margin:8px 12px"><div class="helper">Use this from the Home screen: Support ‚Üí Orientation, or via Comms announcements. (Full stepper available in earlier prototype if needed.)</div></div>
    </section>

    <!-- Profile (placeholder for completeness) -->
    <section class="screen" id="profile">
      <div class="status"><button class="back" onclick="nav('home')">‚Üê Home</button><div style="width:90px"></div></div>
      <div class="card pad" style="margin:8px 12px"><div style="font-weight:800">Student profile</div><div class="helper">Name: Student A ‚Ä¢ KU ID: 2025xxxxx ‚Ä¢ Dorm: C‚Äë321</div></div>
    </section>

    <div id="toast" class="toast">Saved</div>
  </div>
</div>

<script>
// ---------- Utilities ----------
function nav(id){
  document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  if(id==='laundry_rooms'){ renderLaundryRooms(); }
  if(id==='laundry_room_detail'){ renderLaundryMachines(); }
  if(id==='laundry_booking'){ initLaundryBooking(); }
  if(id==='laundry_bookings'){ renderMyLaundryBookings(); }
  if(id==='maint_list'){ renderMaint(); }
  if(id==='payments'){ renderInvoices(); }
  if(id==='packages'){ renderPackages(); }
  if(id==='visitor'){ renderVisitor(); }
  if(id==='comms_feed'){ renderFeed(); }
  if(id==='book_spaces'){ renderSpaces(); }
}
function toast(msg){const t=document.getElementById('toast');t.textContent=msg;t.classList.add('show');setTimeout(()=>t.classList.remove('show'),1400);}
function svgWasher(){return `<rect x="3" y="3" width="18" height="18" rx="3"/><circle cx="12" cy="12" r="5"/><circle cx="8" cy="7" r="1.2" fill="currentColor"/><circle cx="12" cy="7" r="1.2" fill="currentColor"/>`;}
function svgDryer(){return `<rect x="3" y="3" width="18" height="18" rx="3"/><circle cx="12" cy="12" r="5"/><path d="M12 8l3 4-3 4-3-4 3-4z" />`;}
function pillClass(state){return state==='Resolved'?'success':state==='New'?'info':'warn'}
// ---------- Laundry ----------
const laundryRooms=[
  {id:'a1', name:'Dorm A ‚Äî Level 1 Laundry', open:'06:00‚Äì23:00', busy:'4/10 busy', machines:[
    {id:'w1', type:'washer', name:'Washer 1', state:'running', sub:'Running ‚Ä¢ 12m left'},
    {id:'w2', type:'washer', name:'Washer 2', state:'idle', sub:'Idle ‚Ä¢ Free now'},
    {id:'d1', type:'dryer', name:'Dryer 1', state:'running', sub:'Running ‚Ä¢ 23m left'},
    {id:'d2', type:'dryer', name:'Dryer 2', state:'error', sub:'Out of service'},
    {id:'w3', type:'washer', name:'Washer 3', state:'running', sub:'Running ‚Ä¢ 7m left'},
    {id:'d3', type:'dryer', name:'Dryer 3', state:'idle', sub:'Idle ‚Ä¢ Free now'},
  ]},
  {id:'b2', name:'Dorm B ‚Äî Basement Laundry', open:'24 hours', busy:'6/12 busy', machines:[
    {id:'w4', type:'washer', name:'Washer 4', state:'idle', sub:'Idle ‚Ä¢ Free now'},
    {id:'w5', type:'washer', name:'Washer 5', state:'running', sub:'Running ‚Ä¢ 18m left'},
    {id:'d4', type:'dryer', name:'Dryer 4', state:'running', sub:'Running ‚Ä¢ 10m left'},
    {id:'d5', type:'dryer', name:'Dryer 5', state:'idle', sub:'Idle ‚Ä¢ Free now'}
  ]}
];
let LcurrentRoom=laundryRooms[0], Lfilter='all';
let laundryBookings=[]; // {id, machineId, roomId, dayLabel, hour}
function renderLaundryRooms(){
  const box=document.getElementById('laundryRoomList');box.innerHTML='';
  laundryRooms.forEach(r=>{
    const row=document.createElement('div');row.className='row';
    row.innerHTML=`<div class="glyph" style="width:46px;height:46px;border-radius:14px;display:grid;place-items:center;border:2px solid var(--ku-blue);background:var(--ku-soft)">
      <svg viewBox="0 0 24 24" stroke="currentColor" fill="none" stroke-width="2" style="width:22px;height:22px;color:var(--ku-blue)">${svgWasher()}</svg></div>
      <div><div class="name" style="font-weight:800">${r.name}</div><div class="helper">Open ${r.open} ‚Ä¢ ${r.busy}</div></div>
      <button class="pill info" onclick="openLaundryRoom('${r.id}')">View</button>`;
    box.appendChild(row);
  });
}
function openLaundryRoom(id){LcurrentRoom=laundryRooms.find(r=>r.id===id);document.getElementById('laundryRoomTitle').textContent=LcurrentRoom.name;Lfilter='all';nav('laundry_room_detail');}
function laundryFilter(mode){Lfilter=mode;renderLaundryMachines();}
function renderLaundryMachines(){
  const area=document.getElementById('laundryMachines');area.innerHTML='';
  LcurrentRoom.machines.filter(m=>Lfilter==='all'||m.type===Lfilter).forEach(m=>{
    const el=document.createElement('div');el.className='machine';const col=m.state==='idle'?'success':m.state==='error'?'danger':'warn';
    el.innerHTML=`<div class="top"><div class="glyph"><svg viewBox="0 0 24 24" stroke="currentColor" fill="none" stroke-width="2" style="width:22px;height:22px;color:var(--ku-blue)">${m.type==='washer'?svgWasher():svgDryer()}</svg></div><div class="name">${m.name}</div><div class="status ${col}">${m.state==='idle'?'Free':m.state==='error'?'Out':'Running'}</div></div><div class="sub">${m.sub}</div><div style="margin-top:8px;display:flex;gap:8px"><button class="btn primary" onclick="nav('laundry_booking');setLBMachine('${m.id}')">Book slot</button><button class="btn ghost" onclick="toast('Alert set for ${m.name}')">Alert me</button></div>`;
    area.appendChild(el);
  });
}
function setLBMachine(mid){const sel=document.getElementById('lb_machine');sel.value=mid;}
function initLaundryBooking(){
  // populate machine dropdown
  const sel=document.getElementById('lb_machine'); sel.innerHTML=''; LcurrentRoom.machines.forEach(m=>{const op=document.createElement('option');op.value=m.id;op.textContent=`${m.name} (${m.type})`; sel.appendChild(op);});
  // days
  const daysBox=document.getElementById('lb_days'); daysBox.innerHTML='';
  const days=['Today','Tomorrow','Fri 24','Sat 25','Sun 26']; days.forEach((d,i)=>{const e=document.createElement('div');e.className='day'+(i===0?' active':''); e.textContent=d; e.onclick=()=>{document.querySelectorAll('#lb_days .day').forEach(x=>x.classList.remove('active')); e.classList.add('active'); renderLBSslots(d);}; daysBox.appendChild(e);});
  renderLBSslots(days[0]);
}
function renderLBSslots(dayLabel){
  const slots=document.getElementById('lb_slots'); slots.innerHTML='';
  const hours=['08:00','08:30','09:00','09:30','10:00','10:30','11:00','11:30','12:00','12:30','13:00','13:30','14:00','14:30','15:00','15:30','16:00','16:30','17:00','17:30','18:00','18:30','19:00','19:30','20:00','20:30'];
  hours.forEach(h=>{
    const used=laundryBookings.some(b=>b.dayLabel===dayLabel && b.hour===h && b.machineId===document.getElementById('lb_machine').value);
    const s=document.createElement('div'); s.className='slot'+(used?'':' active'); s.textContent=h; s.onclick=()=>{ if(used)return; document.querySelectorAll('#lb_slots .slot').forEach(x=>x.classList.remove('active')); s.classList.add('active'); s.dataset.sel='1'; };
    if(used){ s.style.opacity=.4; s.style.cursor='not-allowed'; }
    slots.appendChild(s);
  });
}
function confirmLaundryBooking(){
  const mid=document.getElementById('lb_machine').value; const dayEl=document.querySelector('#lb_days .day.active'); const slotEl=document.querySelector('#lb_slots .slot.active');
  if(!dayEl||!slotEl){toast('Pick a day & time'); return;}
  const booking={id:'LB-'+Math.floor(1000+Math.random()*9000), roomId:LcurrentRoom.id, machineId:mid, dayLabel:dayEl.textContent, hour:slotEl.textContent};
  laundryBookings.unshift(booking); toast('Laundry slot reserved'); nav('laundry_bookings'); renderMyLaundryBookings();
}
function renderMyLaundryBookings(){
  const box=document.getElementById('lb_list'); box.innerHTML='';
  if(laundryBookings.length===0){ box.innerHTML='<div class="row"><div class="helper">No bookings yet.</div></div>'; return; }
  laundryBookings.forEach(b=>{
    const m=LcurrentRoom.machines.find(x=>x.id===b.machineId) || {name:b.machineId}; const row=document.createElement('div'); row.className='row';
    row.innerHTML=`<div class="glyph">üß∫</div><div><div style="font-weight:800">${m.name}</div><div class="helper">${b.dayLabel} ‚Ä¢ ${b.hour}</div></div><button class="pill danger" onclick="cancelLB('${b.id}')">Cancel</button>`; box.appendChild(row);
  });
}
function cancelLB(id){laundryBookings=laundryBookings.filter(b=>b.id!==id); renderMyLaundryBookings(); toast('Cancelled');}

// ---------- Maintenance ----------
let tickets=[{id:'M-1042', title:'A/C not cooling', meta:'Bldg C ‚Ä¢ Room 321', state:'In Progress', timeline:['08:12 submitted','09:01 assigned','12:22 technician en route']},{id:'M-1043', title:'Ceiling light flickers', meta:'Bldg A ‚Ä¢ Room 114', state:'New', timeline:['09:45 submitted']},{id:'M-1033', title:'Leaky tap fixed', meta:'Bldg B ‚Ä¢ Room 208', state:'Resolved', timeline:['Yesterday resolved']}];
let currentTicketIndex=0;
function renderMaint(){const box=document.getElementById('maintList'); box.innerHTML=''; tickets.forEach((t,i)=>{const row=document.createElement('div');row.className='row';row.innerHTML=`<div class="glyph">üõ†Ô∏è</div><div><div style="font-weight:800">${t.title}</div><div class="helper">${t.meta} ‚Ä¢ ${t.id}</div></div><button class="pill ${pillClass(t.state)}" onclick="openTicket(${i})">${t.state}</button>`; box.appendChild(row);});}
function openTicket(i){currentTicketIndex=i;const t=tickets[i]; document.getElementById('ticketTitle').textContent=t.title; document.getElementById('ticketMeta').textContent=`${t.meta} ‚Ä¢ #${t.id}`; const pill=document.getElementById('ticketPill'); pill.textContent=t.state; pill.className='pill '+pillClass(t.state); document.getElementById('timeline').textContent=t.timeline.join(' ‚Ä¢ '); document.getElementById('ratingCard').style.display=(t.state==='Resolved')?'block':'none'; nav('maint_ticket');}
function submitMaint(){const title=document.getElementById('cat').value+' issue'; const meta=document.getElementById('loc').value||'Bldg ? ‚Ä¢ Room ?'; const id='M-'+Math.floor(1000+Math.random()*9000); const t={id,title,meta,state:'New',timeline:['Just now submitted']}; tickets.unshift(t); toast('Request submitted'); nav('maint_list'); renderMaint();}
function advanceTicket(){const t=tickets[currentTicketIndex]; t.timeline.push('Update at '+new Date().toLocaleTimeString().slice(0,5)); document.getElementById('timeline').textContent=t.timeline.join(' ‚Ä¢ '); toast('Update added');}
function resolveTicket(){const t=tickets[currentTicketIndex]; t.state='Resolved'; t.timeline.push('Resolved at '+new Date().toLocaleTimeString().slice(0,5)); openTicket(currentTicketIndex); toast('Marked resolved');}

// ---------- Facility Booking ----------
const spaces=[{id:'s1', title:'Gym ‚Äî Court A', meta:'Capacity 10 ‚Ä¢ Ground floor'},{id:'s2', title:'Study Room B‚Äë203', meta:'Capacity 4 ‚Ä¢ Level 2'},{id:'s3', title:'Music Studio 2', meta:'Solo ‚Ä¢ Level 1'}];
let selectedSpace=null; let selectedSlot='18:00‚Äì19:00';
function renderSpaces(){const box=document.getElementById('spaceList'); box.innerHTML=''; spaces.forEach(s=>{const row=document.createElement('div'); row.className='row'; row.innerHTML=`<div class="glyph">üèüÔ∏è</div><div><div style="font-weight:800">${s.title}</div><div class="helper">${s.meta}</div></div><button class="pill info" onclick="openSpace('${s.id}')">Reserve</button>`; box.appendChild(row);});}
function openSpace(id){selectedSpace=spaces.find(x=>x.id===id); document.getElementById('spaceTitle').textContent=selectedSpace.title; document.getElementById('spaceMeta').textContent=selectedSpace.meta; nav('book_space_detail');}
function selectDay(el){document.querySelectorAll('.day').forEach(d=>d.classList.remove('active')); el.classList.add('active');}
function selectSlot(el){document.querySelectorAll('.slot').forEach(s=>s.classList.remove('active')); el.classList.add('active'); selectedSlot=el.textContent;}
function confirmBooking(){document.getElementById('confirmMeta').textContent=`${selectedSpace.title}, ${selectedSlot}`; nav('book_confirm'); toast('Reservation confirmed');}

// ---------- Comms ----------
const items=[{title:'AC maintenance Fri 10:00‚Äì12:00', sub:'Bldg C will have intermittent cooling', tag:'Important', col:'danger'},{title:'Movie night on the lawn', sub:'Sat 20:00 ‚Ä¢ Bring your own snacks', tag:'Event', col:'info'},{title:'Lost & Found moved', sub:'New desk at Dorm A lobby', tag:'Update', col:'warn'}];
function renderFeed(){const box=document.getElementById('feed'); box.innerHTML=''; items.forEach(i=>{const row=document.createElement('div'); row.className='row'; row.innerHTML=`<div class="glyph">üì∞</div><div><div style="font-weight:800">${i.title}</div><div class="helper">${i.sub}</div></div><div class="pill ${i.col}">${i.tag}</div>`; box.appendChild(row);});}

// ---------- Payments ----------
let balance=2140; const invoiceData=[{id:'INV-2025-03', amt:1200, due:'Mar 25', status:'Paid'},{id:'INV-2025-04', amt:940, due:'Apr 25', status:'Due'},{id:'INV-2025-05', amt:1000, due:'May 25', status:'Upcoming'}];
function renderInvoices(){document.getElementById('balance').textContent=balance; const box=document.getElementById('invoices'); box.innerHTML=''; invoiceData.forEach(inv=>{const row=document.createElement('div'); row.className='row'; row.innerHTML=`<div class="glyph">üí≥</div><div><div style="font-weight:800">${inv.id}</div><div class="helper">AED ${inv.amt} ‚Ä¢ ${inv.due}</div></div><div class="pill ${inv.status==='Paid'?'success':inv.status==='Due'?'danger':'info'}">${inv.status}</div>`; box.appendChild(row);});}
function payNow(){const due=invoiceData.find(i=>i.status==='Due'); if(!due){toast('Nothing due'); return;} due.status='Paid'; balance-=due.amt; renderInvoices(); toast('Payment successful');}

// ---------- Packages ----------
let packages=[{id:'PKG-771', from:'Amazon', status:'Ready for pickup'},{id:'PKG-812', from:'Parents', status:'Collected'}];
function renderPackages(){const box=document.getElementById('pkgList'); box.innerHTML=''; packages.forEach(p=>{const row=document.createElement('div');row.className='row'; row.innerHTML=`<div class="glyph">üì¶</div><div><div style="font-weight:800">${p.id} ‚Ä¢ ${p.from}</div><div class="helper">${p.status}</div></div>${p.status==='Ready for pickup'?'<button class="pill info" onclick="pickupPkg(\\''+p.id+'\\')">Show QR</button>':'<div class="pill success">Collected</div>'}`; box.appendChild(row);});}
function pickupPkg(id){toast('QR shown at desk');}

// ---------- Visitor Passes ----------
let passes=[];
function renderVisitor(){document.getElementById('v_passes').innerHTML = passes.map(p=>`<div class='row'><div class='glyph'>üë•</div><div><div style='font-weight:800'>${p.name}</div><div class='helper'>${p.date} ‚Ä¢ ${p.from}-${p.to}</div></div><div class='pill info'>QR</div></div>`).join('') || '<div class="row"><div class="helper">No active passes.</div></div>'; }
function createVisitor(){const n=document.getElementById('v_name').value, d=document.getElementById('v_date').value, f=document.getElementById('v_from').value, t=document.getElementById('v_to').value; if(!n||!d||!f||!t){toast('Fill all fields'); return;} passes.unshift({name:n,date:d,from:f,to:t}); renderVisitor(); toast('Pass created');}

// ---------- Support tabs ----------
function openSupportTab(evt, id){document.querySelectorAll('#support .tab').forEach(t=>t.classList.remove('active')); evt.target.classList.add('active'); ['help','faqs','contact'].forEach(x=>document.getElementById(x).style.display='none'); document.getElementById(id).style.display='block';}

// ---------- Chat ----------
function sendChat(){const box=document.getElementById('chatBox'); const msg=document.getElementById('chatMsg'); if(!msg.value.trim())return; const d=document.createElement('div'); d.className='helper'; d.textContent='[You] '+msg.value; box.appendChild(d); box.scrollTop=box.scrollHeight; msg.value='';}

// ---------- Lost & Found ----------
let myLost=[];
function lfTab(e,id){document.querySelectorAll('#lostfound .tab').forEach(x=>x.classList.remove('active')); e.target.classList.add('active'); ['found','report','mine'].forEach(x=>document.getElementById(x).style.display='none'); document.getElementById(id).style.display='block';}
function reportLost(){const item=document.getElementById('lf_item').value, where=document.getElementById('lf_where').value; if(!item||!where){toast('Add item & place'); return;} myLost.unshift({item,where}); document.getElementById('lf_my').innerHTML = myLost.map(m=>`<div class='row'><div class='glyph'>‚ùì</div><div><div style='font-weight:800'>${m.item}</div><div class='helper'>${m.where}</div></div></div>`).join(''); toast('Reported'); lfTab({target:document.querySelectorAll('#lostfound .tab')[2]},'mine');}

// ---------- Peer Match ----------
function genMatches(){const picks=['AI','Football','Gaming','Photography'].filter((x,i)=>document.querySelectorAll('#peermatch input[type=checkbox]')[i].checked); const box=document.getElementById('matchRes'); box.innerHTML=''; if(picks.length===0){box.innerHTML='<div class="row"><div class="helper">Pick an interest.</div></div>';return;} ['Omar','Aisha','Bilal','Lina'].forEach(n=>{const row=document.createElement('div'); row.className='row'; row.innerHTML=`<div class="glyph">üë§</div><div><div style="font-weight:800">${n}</div><div class="helper">Matches: ${picks.join(', ')}</div></div><button class="pill info" onclick="toast('Invite sent to ${n}')">Invite</button>`; box.appendChild(row);});}

// ---------- Rewards ----------
function redeem(){const pts=document.getElementById('pts'); pts.textContent=parseInt(pts.textContent)-500; toast('Redeemed 500 pts');}

// ---------- Initialize ----------
renderLaundryRooms(); renderMaint(); renderFeed(); renderSpaces(); renderInvoices(); renderPackages(); renderVisitor();
</script>
</body>
</html>
