<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>KU — Rates & Room Types (Demo)</title>
  <style>
    /* ===== Design tokens ===== */
    :root{
      --ink:#0b132b;
      --navy:#0a2342;
      --blue:#1f6feb;
      --mint:#12a39e;
      --muted:#5b7083;
      --bg:#ffffff;
      --surface:#f7f9fc;
      --border:#e6edf8;
      --shadow:0 10px 28px rgba(2,12,27,0.08);
      --radius:14px;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:var(--surface);color:#0b0f1a}

    .wrap{width:min(1100px,92vw);margin:32px auto}
    .card{background:var(--bg);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow);overflow:clip}
    .card-pad{padding:18px 20px}

    /* ===== Tabs (accessible) ===== */
    .tabs{display:flex;gap:6px;flex-wrap:wrap;margin:0 0 14px}
    .tabs [role="tab"]{
      appearance:none;border:1px solid var(--border);background:#fff;color:#0b1f44;
      padding:9px 14px;border-radius:10px;font-weight:600;cursor:pointer
    }
    .tabs [role="tab"][aria-selected="true"]{
      background:linear-gradient(180deg,#fff,#f3f7ff);
      border-color:#c9d6ff;color:#0a2342;box-shadow:0 1px 0 #fff inset, 0 0 0 2px #e6edff
    }
    .tabpanel{display:none}
    .tabpanel[aria-hidden="false"]{display:block}

    /* ===== Layout ===== */
    .grid{display:grid;gap:16px}
    .g2{grid-template-columns:2fr 1fr}
    @media (max-width: 920px){ .g2{grid-template-columns:1fr} }

    h2{margin:0 0 8px;font-size:1.25rem}
    .muted{color:var(--muted)}

    /* ===== Rates table ===== */
    .rates{width:100%;border-collapse:separate;border-spacing:0}
    .rates caption{caption-side:top;text-align:left;font-weight:700;margin:0 0 8px}
    .rates th, .rates td{padding:12px 14px;border-bottom:1px solid var(--border)}
    .rates thead th{font-size:.92rem;text-transform:uppercase;letter-spacing:.04em;color:#314d72;background:#f6f9ff}
    .rates tbody tr:last-child td, .rates tbody tr:last-child th{border-bottom:0}
    .rates th[scope="row"]{font-weight:600}
    .col-term, .col-month{white-space:nowrap;font-variant-numeric:tabular-nums}
    .price{background:#f7fbff;border:1px solid #e6f0ff;border-radius:10px;padding:6px 10px;display:inline-block}
    .hide-col .col-term, .hide-col .th-term{display:none}
    .hide-col .col-month, .hide-col .th-month{display:none}
    .hide-col.term .col-month, .hide-col.term .th-month{display:table-cell}
    .hide-col.month .col-term, .hide-col.month .th-term{display:table-cell}

    /* ===== Photos upload ===== */
    .photos .toolbar{display:flex;gap:8px;align-items:center;margin-bottom:8px}
    .photos input[type="file"]{font-size:.9rem}
    .thumbs{display:grid;grid-template-columns:repeat(3,1fr);gap:8px}
    .thumbs img{width:100%;aspect-ratio:1.3/1;object-fit:cover;border-radius:10px;border:1px solid var(--border)}
    .empty{border:2px dashed #cfe0ff;border-radius:12px;display:grid;place-items:center;min-height:120px;color:#5f77a6;background:#f8fbff}

    /* ===== Tiny popover ===== */
    .popover{position:absolute;inset:auto auto auto 0;transform:translateY(8px);
      background:#fff;border:1px solid var(--border);border-radius:12px;box-shadow:var(--shadow);
      padding:10px;min-width:220px;display:none;z-index:10}
    .popover .row{display:flex;align-items:center;gap:8px;margin:6px 0}
    .rel{position:relative}
    .btn{display:inline-flex;align-items:center;gap:.45rem;border:1px solid #cfe0ff;background:#fff;
      padding:7px 10px;border-radius:10px;font-weight:600;color:#21406e;cursor:pointer}
    .btn.primary{background:var(--blue);color:#fff;border-color:#2a63ff}
    .btn.small{padding:6px 9px;font-size:.92rem}
    .btn:focus-visible{outline:3px solid #a7c0ff;outline-offset:2px}
    .toolbar .btn{white-space:nowrap}
    .open + .popover{display:block}
    .kicker{font-size:.82rem;text-transform:uppercase;letter-spacing:.12em;color:#678;display:block;margin-bottom:8px}
    ul.check{margin:8px 0 0 18px;color:#2e3d58}
    ul.check li{margin:6px 0}
  </style>
</head>
<body>
  <main class="wrap">
    <div class="tabs" role="tablist" aria-label="Campuses">
      <button role="tab" id="tab-main-btn" aria-selected="true" aria-controls="panel-main">Main Campus</button>
      <button role="tab" id="tab-san-btn" aria-selected="false" aria-controls="panel-san">Sas Al Nakhl</button>
    </div>

    <!-- ========= MAIN CAMPUS ========= -->
    <section id="panel-main" class="tabpanel" role="tabpanel" tabindex="0" aria-labelledby="tab-main-btn" aria-hidden="false">
      <div class="card card-pad">
        <div class="grid g2">
          <div>
            <h2>Rates &amp; Room Types</h2>
            <table class="rates" aria-describedby="inc-main" id="rates-main">
              <caption class="muted">Academic year pricing (AED)</caption>
              <colgroup>
                <col style="width:48%">
                <col style="width:26%">
                <col style="width:26%">
              </colgroup>
              <thead>
                <tr>
                  <th scope="col">Room</th>
                  <th scope="col" class="th-term">Per term (AED)</th>
                  <th scope="col" class="th-month">Per month (AED)</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <th scope="row">Single</th>
                  <td class="col-term"><span class="price">14,500</span></td>
                  <td class="col-month"><span class="price">3,200</span></td>
                </tr>
                <tr>
                  <th scope="row">Double (shared)</th>
                  <td class="col-term"><span class="price">10,900</span></td>
                  <td class="col-month"><span class="price">2,450</span></td>
                </tr>
                <tr>
                  <th scope="row">Studio</th>
                  <td class="col-term"><span class="price">18,400</span></td>
                  <td class="col-month"><span class="price">4,100</span></td>
                </tr>
              </tbody>
            </table>

            <span class="kicker" id="inc-main">What’s included</span>
            <ul class="check" aria-labelledby="inc-main">
              <li>Furnished rooms with desk &amp; chair</li>
              <li>Wi‑Fi, A/C, laundry, study lounges, prayer space</li>
              <li>24/7 security &amp; front desk</li>
            </ul>
          </div>

          <aside class="photos">
            <h2>Photos</h2>
            <div class="toolbar rel">
              <button class="btn small" type="button" data-popover="pop-main">Customize ▾</button>
              <label class="btn small" for="files-main">Choose Files</label>
              <input id="files-main" data-file-input type="file" accept="image/*" multiple hidden>
              <!-- popover -->
              <div class="popover" id="pop-main" aria-label="Customize columns">
                <div class="row"><strong>Columns</strong></div>
                <div class="row">
                  <input type="checkbox" id="term-main" checked>
                  <label for="term-main">Show “Per term”</label>
                </div>
                <div class="row">
                  <input type="checkbox" id="month-main" checked>
                  <label for="month-main">Show “Per month”</label>
                </div>
                <hr style="border:none;border-top:1px solid var(--border);margin:8px 0">
                <button class="btn small" type="button" data-close>Done</button>
              </div>
            </div>
            <div class="thumbs" id="thumbs-main" aria-live="polite">
              <div class="empty">No photos yet</div>
            </div>
          </aside>
        </div>
      </div>
    </section>

    <!-- ========= SAS AL NAKHL ========= -->
    <section id="panel-san" class="tabpanel" role="tabpanel" tabindex="0" aria-labelledby="tab-san-btn" aria-hidden="true">
      <div class="card card-pad">
        <div class="grid g2">
          <div>
            <h2>Rates &amp; Room Types</h2>
            <table class="rates" aria-describedby="inc-san" id="rates-san">
              <caption class="muted">Academic year pricing (AED)</caption>
              <colgroup>
                <col style="width:48%">
                <col style="width:26%">
                <col style="width:26%">
              </colgroup>
              <thead>
                <tr>
                  <th scope="col">Room</th>
                  <th scope="col" class="th-term">Per term (AED)</th>
                  <th scope="col" class="th-month">Per month (AED)</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <th scope="row">Single</th>
                  <td class="col-term"><span class="price">12,800</span></td>
                  <td class="col-month"><span class="price">2,900</span></td>
                </tr>
                <tr>
                  <th scope="row">Double (shared)</th>
                  <td class="col-term"><span class="price">9,600</span></td>
                  <td class="col-month"><span class="price">2,200</span></td>
                </tr>
                <tr>
                  <th scope="row">Studio</th>
                  <td class="col-term"><span class="price">16,900</span></td>
                  <td class="col-month"><span class="price">3,800</span></td>
                </tr>
              </tbody>
            </table>

            <span class="kicker" id="inc-san">What’s included</span>
            <ul class="check" aria-labelledby="inc-san">
              <li>Furnished rooms with study desks</li>
              <li>Wi‑Fi, A/C, laundry</li>
              <li>Courtyards &amp; quiet zones • Shuttle to Main Campus</li>
            </ul>
          </div>

          <aside class="photos">
            <h2>Photos</h2>
            <div class="toolbar rel">
              <button class="btn small" type="button" data-popover="pop-san">Customize ▾</button>
              <label class="btn small" for="files-san">Choose Files</label>
              <input id="files-san" data-file-input type="file" accept="image/*" multiple hidden>
              <div class="popover" id="pop-san" aria-label="Customize columns">
                <div class="row"><strong>Columns</strong></div>
                <div class="row">
                  <input type="checkbox" id="term-san" checked>
                  <label for="term-san">Show “Per term”</label>
                </div>
                <div class="row">
                  <input type="checkbox" id="month-san" checked>
                  <label for="month-san">Show “Per month”</label>
                </div>
                <hr style="border:none;border-top:1px solid var(--border);margin:8px 0">
                <button class="btn small" type="button" data-close>Done</button>
              </div>
            </div>
            <div class="thumbs" id="thumbs-san" aria-live="polite">
              <div class="empty">No photos yet</div>
            </div>
          </aside>
        </div>
      </div>
    </section>
  </main>

  <script>
    // ===== Tab behavior =====
    const tabs = Array.from(document.querySelectorAll('[role="tab"]'));
    const panels = new Map([
      ['tab-main-btn', document.getElementById('panel-main')],
      ['tab-san-btn',  document.getElementById('panel-san')]
    ]);
    function activateTab(btn){
      tabs.forEach(t => t.setAttribute('aria-selected', String(t===btn)));
      panels.forEach((panel, id) => {
        const active = (id === btn.id);
        panel.setAttribute('aria-hidden', String(!active));
        if(active) panel.focus({preventScroll:true});
      });
    }
    tabs.forEach(t=>{
      t.addEventListener('click', ()=>activateTab(t));
      t.addEventListener('keydown', (e)=>{
        const i = tabs.indexOf(t);
        if(e.key==='ArrowRight') tabs[(i+1)%tabs.length].focus();
        if(e.key==='ArrowLeft')  tabs[(i-1+tabs.length)%tabs.length].focus();
      });
    });

    // ===== Customize popover (show/hide columns) =====
    function wirePopover(scope){
      const btn = document.querySelector(`[data-popover="${scope.pop}"]`);
      const pop = document.getElementById(scope.pop);
      const term = document.getElementById(scope.termChk);
      const month = document.getElementById(scope.monthChk);
      const table = document.getElementById(scope.tableId);
      const closeBtns = pop.querySelectorAll('[data-close]');

      function apply(){
        // Reset
        table.classList.remove('hide-col','term','month');
        // Ensure at least one column visible
        if(!term.checked && !month.checked){ term.checked = true; }
        if(!term.checked){ table.classList.add('hide-col','term'); }
        if(!month.checked){ table.classList.add('hide-col','month'); }
      }
      btn.addEventListener('click', ()=>{
        btn.classList.toggle('open');
        pop.style.display = btn.classList.contains('open') ? 'block' : 'none';
      });
      document.addEventListener('click', (e)=>{
        if(!btn.contains(e.target) && !pop.contains(e.target)){
          btn.classList.remove('open'); pop.style.display = 'none';
        }
      });
      [term, month].forEach(c=>c.addEventListener('change', apply));
      closeBtns.forEach(b=>b.addEventListener('click', ()=>{
        btn.classList.remove('open'); pop.style.display = 'none';
      }));
      apply();
    }
    wirePopover({ pop:'pop-main', termChk:'term-main', monthChk:'month-main', tableId:'rates-main' });
    wirePopover({ pop:'pop-san',  termChk:'term-san',  monthChk:'month-san',  tableId:'rates-san'  });

    // ===== File input previews =====
    function wirePreview(inputId, thumbsId){
      const input = document.getElementById(inputId);
      const thumbs = document.getElementById(thumbsId);
      input.addEventListener('change', ()=>{
        thumbs.innerHTML = '';
        if(!input.files || input.files.length===0){
          thumbs.innerHTML = '<div class="empty">No photos yet</div>';
          return;
        }
        [...input.files].forEach(file=>{
          const img = document.createElement('img');
          img.alt = file.name;
          img.src = URL.createObjectURL(file);
          img.onload = ()=> URL.revokeObjectURL(img.src);
          thumbs.appendChild(img);
        });
      });
    }
    wirePreview('files-main','thumbs-main');
    wirePreview('files-san','thumbs-san');
  </script>
</body>
</html>
